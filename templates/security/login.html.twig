{% extends 'base.html.twig' %}

{% block title %}Log in!{% endblock %}

{% block top_label %}
    <!--[if lt IE 8]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please
        <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.
    </p>
    <![endif]-->
{% endblock %}

{% block desktop_menu %}
{% endblock %}

{% block mobile_menu %}
{% endblock %}

{% block footer %}
{% endblock %}

{% block content %}
    {% if app.user %}
        <div class="mb-3">
            Jesteś zalogowany jako {{ app.user.username }}, <a href="{{ path('app_logout') }}">wyloguj się</a>
        </div>
    {% else %}
        <div class="login-content">
            <!-- Login -->
            <div class="nk-block toggled" id="l-login">
                <form method="post" id="login-form">
                    <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">
                    <div class="nk-form">
                        {% if error %}
                            <div class="alert alert-danger">{{ error.messageKey|trans(error.messageData, 'security') }}</div>
                        {% endif %}
                        <div class="input-group">
                            <span class="input-group-addon nk-ic-st-pro"><i class="notika-icon notika-support"></i></span>
                            <div class="nk-int-st">
                                <input type="text" name="username" class="form-control" placeholder="Nazwa użytkownika"
                                       value="{{ last_username }}" id="inputUsername" required autofocus>
                            </div>
                        </div>
                        <div class="input-group mg-t-15">
                            <span class="input-group-addon nk-ic-st-pro"><i class="notika-icon notika-edit"></i></span>
                            <div class="nk-int-st">
                                <input type="password" name="password" class="form-control" placeholder="Hasło"
                                       id="inputPassword" required>
                            </div>
                        </div>
                        <div class="fm-checkbox">
                            <label><input type="checkbox" class="i-checks" name="_remember_me"> <i></i> Zapamiętaj mnie</label>
                        </div>
                        <a href="" data-ma-action="nk-login-switch" data-ma-block="#l-login"
                           class="btn btn-login btn-success btn-float"
                           onclick="document.getElementById('login-form').submit();">
                            <i class="notika-icon notika-right-arrow right-arrow-ant"></i>
                        </a>
                    </div>

                    <div class="nk-navigation nk-lg-ic">
                        <a href="#" data-ma-action="nk-login-switch" data-ma-block="#l-register">
                            <i class="notika-icon notika-plus-symbol"></i>
                            <span>Zarejestruj się</span>
                        </a>
                        <a href="#" data-ma-action="nk-login-switch" data-ma-block="#l-forget-password">
                            <i>?</i>
                            <span>Nie pamiętam hasła</span>
                        </a>
                    </div>
                </form>
            </div>

            <!-- Register -->
            <div class="nk-block" id="l-register">
                <form method="post" id="register-form">
                    <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">
                    <div class="nk-form">
                        <div class="input-group">
                            <span class="input-group-addon nk-ic-st-pro"><i class="notika-icon notika-support"></i></span>
                            <div class="nk-int-st">
                                <input type="text" class="form-control" placeholder="Nazwa użytkownika" name="username">
                            </div>
                        </div>

                        <div class="input-group mg-t-15">
                            <span class="input-group-addon nk-ic-st-pro"><i class="notika-icon notika-mail"></i></span>
                            <div class="nk-int-st">
                                <input type="text" class="form-control" placeholder="Adres e-mail">
                            </div>
                        </div>

                        <div class="input-group mg-t-15">
                            <span class="input-group-addon nk-ic-st-pro"><i class="notika-icon notika-edit"></i></span>
                            <div class="nk-int-st">
                                <input type="password" class="form-control" placeholder="Hasło">
                            </div>
                        </div>

                        <div class="input-group mg-t-15">
                            <span class="input-group-addon nk-ic-st-pro"><i class="notika-icon notika-edit"></i></span>
                            <div class="nk-int-st">
                                <input type="password" class="form-control" placeholder="Powtórz hasło">
                            </div>
                        </div>

                        <a href="" data-ma-action="nk-login-switch" data-ma-block="#l-register"
                           class="btn btn-login btn-success btn-float"
                           onclick="document.getElementById('register-form').submit();">
                            <i class="notika-icon notika-right-arrow"></i>
                        </a>
                    </div>

                    <div class="nk-navigation rg-ic-stl">
                        <a href="#" data-ma-action="nk-login-switch" data-ma-block="#l-login">
                            <i class="notika-icon notika-right-arrow"></i>
                            <span>Zaloguj</span>
                        </a>
                        <a href="" data-ma-action="nk-login-switch" data-ma-block="#l-forget-password">
                            <i>?</i>
                            <span>Nie pamiętam hasła</span>
                        </a>
                    </div>
                </form>
            </div>

            <!-- Forgot Password -->
            <div class="nk-block" id="l-forget-password">
                <div class="nk-form">
                    <p class="text-left">Wpisz w poniższym polu adres e-mail, który został podany podczas rejestracji konta.
                        Następnie otrzymasz na niego kod umożliwiający zresetowanie hasła.</p>

                    <div class="input-group">
                        <span class="input-group-addon nk-ic-st-pro"><i class="notika-icon notika-mail"></i></span>
                        <div class="nk-int-st">
                            <input type="text" class="form-control" placeholder="Adres e-mail">
                        </div>
                    </div>

                    <a href="#l-login" data-ma-action="nk-login-switch" data-ma-block="#l-login"
                       class="btn btn-login btn-success btn-float">
                        <i class="notika-icon notika-right-arrow"></i>
                    </a>
                </div>

                <div class="nk-navigation nk-lg-ic rg-ic-stl">
                    <a href="" data-ma-action="nk-login-switch" data-ma-block="#l-login">
                        <i class="notika-icon notika-right-arrow"></i>
                        <span>Zaloguj</span>
                    </a>
                    <a href="" data-ma-action="nk-login-switch" data-ma-block="#l-register">
                        <i class="notika-icon notika-plus-symbol"></i>
                        <span>Zarejestruj się</span>
                    </a>
                </div>
            </div>
        </div>
    {% endif %}
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('assets/js/login-action.js') }}"></script>
{% endblock %}
